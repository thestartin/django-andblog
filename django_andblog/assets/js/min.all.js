(function(){var h=$('<div class="section"></div>').append($("#sec").clone()).html();h=$(h);$(h).find("div.norep").remove();var c=$('<div id="sec" class="section"></div>').append(h.clone()).html();var f=1;var b=function(){var s;if(typeof jQuery=="undefined"&&typeof django=="undefined"){console.error("ERROR django-ckeditor missing jQuery. Set CKEDITOR_JQUERY_URL or provide jQuery in the template.")}else{if(typeof django!="undefined"){s=django.jQuery}}var t=jQuery||s;t(function(){u();v();function v(){try{t(document).on("click",".add-row a, .grp-add-handler",function(){u();return true})}catch(w){t(document).delegate(".add-row a, .grp-add-handler","click",function(){u();return true})}}function u(){t("textarea[data-type=ckeditortype]").each(function(){if(t(this).data("processed")=="0"&&t(this).attr("id").indexOf("__prefix__")==-1){t(this).data("processed","1");CKEDITOR.replace(t(this).attr("id"),t(this).data("config"))}})}})};var g=function(u){var x=u.attr("id");var w=u.attr("name");var t=u.attr("data-section-id");var v={id:x,name:w};for(var y in v){if(v.hasOwnProperty(y)){if(v[y]){var z=v[y].split("_");if(z.length>1){var A=z.pop();z.push(A-1)}var s=z.join("_");u.attr(y,s)}}}if(t){u.attr("data-section-id",t-1)}};var e=function(s){$("div.section").each(function(){if(parseInt($(this).attr("data-section-id"))>s){$(this).find("*").each(function(){g($(this))});g($(this))}})};var n=function(s){if(s==1){return}f--;$("div#sec_"+s).remove();e(s)};var i=function(s){var t=(s==1)?"":"_"+s;$("div#sec"+t).find("input.rep").val("")};var l=function(){f++;var s=$(c);p(s,true);s.insertBefore($("form #div_id_tags"));b()};var p=function(v,t){if(t){var s=v.attr("id");if(s){var u=s+"_"+f;v.attr("id",u)}if($(v).attr("data-section-id")){$(v).attr("data-section-id",f)}}v.find("*").each(function(){var w=$(this).attr("id");var x=$(this).attr("name");if(w){var y=w+"_"+f;$(this).attr("id",y)}if(x){var z=x+"_"+f;$(this).attr("name",z)}if($(this).attr("data-section-id")){$(this).attr("data-section-id",f)}})};var j={del:n,reset:i,add:l};$(document).on("click",".sec_btn",function(){var t=$(this).data("btnNm");var s=$(this).attr("data-section-id");if(t=="del"||t=="reset"||t=="add"){if(s){j[t](s)}else{j[t]()}}});$(document).on("click",".unlike, .like, .abusive",function(){var s=$(this).data("type");var x="";if(s==1){x="likes"}else{if(s==0){x="unlikes"}else{x="abusive"}}var w=$(this).parent().parent();var u=w.data("sec_id");var t=w.data("article_id");var v="/vote/";$.post(v,{article:t,section:u,vote_type:s},function(y){if(y.status=="N"){console.log("Error casting vote")}else{if(y.status=="Y"){w.children().children("span."+x).text(y.data)}}})});var a=$("#menu");function d(){a.find(".custom-can-transform").each(function(){$(this).toggleClass("pure-menu-horizontal")})}function k(){if(a.hasClass("open")){setTimeout(d,500)}else{d()}a.toggleClass("open");$("#toggle").toggleClass("x")}function m(){if(a.hasClass("open")){k()}}$("#toggle").on("click",function(s){k()});$(window).on("orientationchange, resize",function(){m()});function o(s){var w=null;if(document.cookie&&document.cookie!=""){var v=document.cookie.split(";");for(var u=0;u<v.length;u++){var t=jQuery.trim(v[u]);if(t.substring(0,s.length+1)==(s+"=")){w=decodeURIComponent(t.substring(s.length+1));break}}}return w}function q(s){return(/^(GET|HEAD|OPTIONS|TRACE)$/.test(s))}var r=o("csrftoken");$.ajaxSetup({beforeSend:function(t,s){if(!q(s.type)&&!this.crossDomain){t.setRequestHeader("X-CSRFToken",r)}}});$(function(){$(".popup-modal").magnificPopup({type:"inline",preloader:false,focus:"#username",modal:true});$(document).on("click",".popup-modal-dismiss",function(s){s.preventDefault();$.magnificPopup.close()})});$(".trig").on("click",function(w){w.preventDefault();var s=$(this).attr("id").split("_");var v=s[s.length-1];var x=$(this).offset();var t=x.left+$(this).width();t=t.toString();var u=x.top+$(this).height();u=u.toString();var y={right:t+"px",top:u+"px"};$("#"+v).slideToggle();$("#"+v).css(y)});$(".s-trig").on("click",function(s){var u=$(this).data("sec-id");var t=$(this).text()=="View Summary"?"Hide Summary":"View Summary";$("#summary_"+u).slideToggle();$(this).text(t)});$(".ajax-popup-link").magnificPopup({type:"ajax"});$(".compare .inner tr > td > p > img + span").on("click",function(v){var s=$(".compare .inner");var u=$(this).attr("index");if(u){var t=u;s.find("tr:eq("+t+") > td > p > img + span").removeAttr("index")}else{var t=$(this).parent().parent().parent().index();s.find("tr:eq("+t+") > td > p > img + span").attr("index",t)}if($(this).hasClass("only")){$(this).removeClass("only");s.find("tr:eq("+t+") > td > p > img + span").text($(this).attr("original"))}else{s.find("tr:eq("+t+") > td > p > img + span").addClass("only");var w=$(this).text();s.find("tr:eq("+t+") > td > p > img + span").attr("original",w);w=w.replace("only this","all");w=w+"'s";s.find("tr:eq("+t+") > td > p > img + span").text(w)}s.find("tr:not(:eq("+t+"))").slideToggle()})}());(function(){var e;var d=function(){};var b=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];var c=b.length;var a=(window.console=window.console||{});while(c--){e=b[c];if(!a[e]){a[e]=d}}}());